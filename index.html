<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Physics Lab (0.9.2)</title>
    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <!-- Physics system (legacy/compatible) -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@3.3.0/dist/aframe-physics-system.min.js"></script>
    <!-- Super-hands for grabbing (v3.0.3 is the best compatible for 0.9.2) -->
    <script src="https://unpkg.com/super-hands@3.0.3/dist/super-hands.min.js"></script>
    <!-- Old particle system (tested with aframe 0.9.2) -->
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.9/dist/aframe-particle-system-component.min.js"></script>
    <style>
      body { margin: 0 }
      canvas { display: block }
    </style>
    <script>
    // Simple "hit" effect: when any box is hit, change its color and make particles
    AFRAME.registerComponent('hit-particles', {
      init: function () {
        this.el.addEventListener('collide', (e) => {
          // Only react if not ground
          if (e.detail.body.el && e.detail.body.el.getAttribute('class') !== 'ground') {
            this.el.setAttribute('color', '#FFD700');
            var part = document.createElement('a-entity');
            part.setAttribute('particle-system', 'preset: dust; color: #FFD700,#99F; particleCount: 150;');
            part.setAttribute('position', this.el.getAttribute('position'));
            this.el.sceneEl.appendChild(part);
            setTimeout(()=>{ if (part.parentNode) part.parentNode.removeChild(part)}, 1500);
          }
        });
      }
    });
    </script>
  </head>
  <body>
    <a-scene physics="gravity: -9.8" shadow="type: pcfsoft">
      <!-- Ground plane -->
      <a-plane class="ground"
        position="0 0 0"
        rotation="-90 0 0"
        width="12"
        height="12"
        color="#7BC8A4"
        static-body
        shadow="receive: true"></a-plane>
      <!-- Dynamic boxes to demonstrate physics and super-hands grabbing -->
      <a-box position="-1 3 -2" grabbable dynamic-body color="#4CC3D9" shadow="cast:true;receive:true" hit-particles></a-box>
      <a-box position="1 5 -4" grabbable dynamic-body color="#EF2D5E" shadow="cast:true;receive:true" hit-particles></a-box>
      <a-sphere position="0 4 -3" radius="0.6" grabbable dynamic-body color="#FCD303" shadow="cast:true;receive:true"></a-sphere>
 
      <!-- Lights -->
      <a-entity light="type: directional; intensity: 0.9; castShadow: true"
                position="2 7 2"></a-entity>
      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <!-- Camera/Rig and hand controls -->
      <a-entity id="rig">
        <a-entity camera look-controls wasd-controls position="0 1.6 8"></a-entity>
        <a-entity hand-controls="hand: left; modelStyle: lowPoly; handModelStyle: disabled" super-hands></a-entity>
        <a-entity hand-controls="hand: right; modelStyle: lowPoly; handModelStyle: disabled" super-hands></a-entity>
      </a-entity>
      <a-entity teleport-controls="enabled:false"></a-entity>
    </a-scene>
  </body>
</html>
